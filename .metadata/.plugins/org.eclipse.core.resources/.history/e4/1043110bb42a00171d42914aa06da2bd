package com.kms.cura_server;

import java.io.IOException;
import java.sql.SQLException;
import java.util.List;

import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;

import com.google.gson.JsonElement;
import com.kms.cura_server.resources.Strings;
import com.kms.cura_server.response.APIResponse;
import com.kms.cura_server.response.UserAPIResponse;

import toannguyen.rem.dal.database.UserDatabaseHelper;
import toannguyen.rem.dal.exception.DALException;
import toannguyen.rem.dal.user.DoctorUserDAL;
import toannguyen.rem.dal.user.PatientUserDAL;
import toannguyen.rem.dal.user.UserDAL;
import toannguyen.rem.entity.Entity;
import toannguyen.rem.entity.json.EntityToJsonConverter;
import toannguyen.rem.entity.json.JsonToEntityConverter;
import toannguyen.rem.entity.user.DoctorUserEntity;
import toannguyen.rem.entity.user.PatientUserEntity;
import toannguyen.rem.entity.user.UserEntity;

@Path("/user")
public final class UserAPI {

	private static String LIST_OF_CHANGES = "list_of_changes";

	@GET
	@Path("/getAllUser")
	public String getAllUser() {
		try {
			List<Entity> users = UserDAL.getInstance().getAll(new UserDatabaseHelper());
			JsonElement element = EntityToJsonConverter.convertEntityListToJson(users);
			return element.toString();
		} catch (ClassNotFoundException | SQLException | IOException e) {
			return Strings.error_internal + e.getMessage();
		}
	}
}
